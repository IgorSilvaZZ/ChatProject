<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../images/chat-box.png" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <title>Chat</title>
    <link rel="stylesheet" href="../css/global.css">
    <link rel="stylesheet" href="../css/menu.css">
    <link rel="stylesheet" href="../css/chat.css">
</head>
<body>
    <div class="container">
        <div class="navbar">
            <div class="imageContainer">
                <img src="../images/cup.png">
            </div>
            <div class="optionsMenu">
                <div class="options" id="optionsSelected">
                    <img src="../images/comment.svg">
                </div>
                <div class="options">
                    <img src="../images/favorite.svg">
                </div>
                <div class="options" id="profile">
                    <img src="../images/user.svg">
                </div>
                <div class="options" id="logout">
                    <img src="../images/logout.png">
                </div>
            </div>
            <div class="containerUser">
                <img src="../images/user3.png">
            </div>
        </div>
        <div class="main">
            <div class="participants">
                <h2 class="participants_title">Participantes</h2>

                <div class="participantsMain">
                    <div class="searchContainer">
                        <img class="searchContainer_img" src="../images/loupe.svg" alt="Image Search Participants">
                        <input class="searchContainer_input" type="text" placeholder="Search" id="searchValue">
                    </div>

                    <span class="listPeoples" id="list_participants"></span>
                    <script id="template_participants" type="x-tmpl-mustache">
                        <div class="people" id="user{{idSocketParticipant}}" onclick="talk('{{idSocketParticipant}}')">
                            <img class="people_icon" src="../images/user3.png">
                            <p class="people_text">{{nameParticipant}}</p>
                        </div>
                    </script>

                </div>
            </div>

            <div class="chat chatLoadingSelect" id="chat_loading_chat" >
                <img class="chatLoadingSelect_icon" src="../images/chat-select.png">
                <p class="chatLoadingSelect_text">Escolha um usuario ao lado para comeÃ§ar a conversa</p>
            </div>

            <div class="chat" id="chat_container" style="display: none;">
                <p class="chat_title">Mensagens</p>
                <div class="containerChat" id="containerChat">
                </div>
                
                <script id="template_all_messages" type="x-tmpl-mustache">
                    <div style="height: 100%;: 100%; width: 100%;" id="chatContainer{{idSocketParticipant}}">
                    </div>
                </script>

                <script id="template_user_send_message" type="x-tmpl-mustache">
                    <div class="messageUserLoged">
                        <div class="containerMessage userLoged">
                            <span class="usernameLoged">
                                {{name}}
                            </span>
                            <span class="messageBox">
                                {{message}}
                            </span>
                            <span class="date_message">
                                {{date}}
                            </span>
                        </div>
                    </div>
                </script>

                <script id="template_user_receiver_message" type="x-tmpl-mustache">
                    <div class="containerMessage otherUser">
                        <span class="otherUsername">
                            {{name}}
                        </span>
                        <span class="messageBox">
                            {{message}}
                        </span>
                        <span class="date_message">
                            {{date}}
                        </span>
                    </div>
                </div>
                </script>

                <div class="footerChat">
                </div>
                <script id="template_send_message" type="x-tmpl-mustache">
                    <input class="footerChat_input" type="text" placeholder="Escreva mensagem" id="messageUser{{idUserSocket}}" name="messageUser">
                    <div class="buttonSendMessage" id="buttonSubmitMessage" onclick="sendMessage('{{idUserSocket}}')"></div>
                </script>

            </div>
            
        </div>
    </div>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dayjs/1.10.4/dayjs.min.js"></script>
    <script src="https://unpkg.com/mustache@latest"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="js/chat.js"></script>

</body>
</html>